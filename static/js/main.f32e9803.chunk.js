(this["webpackJsonpbuy-bch"]=this["webpackJsonpbuy-bch"]||[]).push([[0],{30:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(2),c=n.n(a),s=n(20),o=n.n(s),i=(n(30),n(1)),u=n.n(i),l=n(3),d=n(5),b=n(6),h=n.n(b),p=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/order/"+t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/order",{bgn_amount:t,bch_addr:n,email:r});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),j=function(){var e=Object(l.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/order/"+t+"/id/phone",{phone:n});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/order/"+t+"/id/phone",{phone:n,secret_code:r});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),m=function(){var e=Object(l.a)(u.a.mark((function e(t,n,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("/order/"+t+"/id/"+r,n,{headers:{"Content-Type":n.type}});case 2:return a=e.sent,console.log(a),console.log(a.data),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),v=(n(49),n(9)),x=n(21),g=n(22),y=n(24),w=n(23),C=n(7),S=n(10),_=(n(50),function(e){var t=e.children,n=(e.inverted,Object(S.a)(e,["children","inverted"]));return Object(r.jsx)("button",Object(C.a)(Object(C.a)({className:"custom-button"},n),{},{children:t}))}),k=(n(51),function(e){var t=e.handleChange,n=e.label,a=Object(S.a)(e,["handleChange","label"]);return Object(r.jsxs)("div",{className:"group",children:[Object(r.jsx)("input",Object(C.a)({className:"form-input",onChange:t},a)),n?Object(r.jsx)("label",{className:"".concat(a.value.length?"shrink":""," form-input-label"),children:n}):null]})}),N=(n(8),function(e){Object(y.a)(n,e);var t=Object(w.a)(n);function n(e){var r;return Object(x.a)(this,n),(r=t.call(this,e)).handleSubmit=function(){var e=Object(l.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,f(r.state.bgn,r.state.bchAddress,r.state.email);case 3:n=e.sent,console.log(n),localStorage.setItem("orderId",n.id),r.props.setOrder(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleChange=function(e){var t=e.target,n=t.value,a=t.name;r.setState(Object(v.a)({},a,n))},r.state={email:"",bchAddress:"",bgn:""},r}return Object(g.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{className:"new-order",children:Object(r.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(r.jsx)(k,{name:"email",type:"email",handleChange:this.handleChange,value:this.state.email,label:"Your Email",required:!0}),Object(r.jsx)(k,{name:"bchAddress",type:"bchAddress",handleChange:this.handleChange,value:this.state.bchAddress,label:"Your Bitcoin Cash Wallet Address",required:!0}),Object(r.jsx)(k,{name:"bgn",type:"number",step:"0.001",handleChange:this.handleChange,value:this.state.bgn,label:"Amount of BGN you want to spend",required:!0}),Object(r.jsx)("div",{className:"buttons",children:Object(r.jsx)(_,{type:"submit",children:" Buy BCH "})})]})})}}]),n}(c.a.Component));n(52);var I=function(e){var t=e.paymentUrl;return Object(r.jsxs)("div",{className:"new-order",children:[Object(r.jsx)("p",{children:"Thank you for your order"}),Object(r.jsxs)("div",{className:"buttons",children:[Object(r.jsx)(_,{onClick:function(){return window.open(t,"_blank")},children:"Pay here"}),Object(r.jsx)(_,{onClick:function(){localStorage.removeItem("orderId"),window.location.reload()},children:"New Order"})]})]})};var A=function(e){var t=e.orderId,n=e.setOrder,c=Object(a.useState)(""),s=Object(d.a)(c,2),o=s[0],i=s[1],b=Object(a.useState)(""),h=Object(d.a)(b,2),p=h[0],f=h[1],m=Object(a.useState)(!1),v=Object(d.a)(m,2),x=v[0],g=v[1],y=function(){var e=Object(l.a)(u.a.mark((function e(r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!x){e.next=8;break}return e.next=4,O(t,o,p);case 4:a=e.sent,n(a),e.next=10;break;case 8:j(t,o),g(!x);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"new-order",children:Object(r.jsxs)("form",{onSubmit:y,children:[Object(r.jsx)(k,{name:"phoneNumber",type:"text",handleChange:function(e){i(e.target.value)},value:o,label:"Your Phone Number",required:!0}),x?Object(r.jsx)(k,{name:"validationCode",type:"text",handleChange:function(e){f(e.target.value)},value:p,label:"SMS Code",required:!0}):null,Object(r.jsx)("div",{className:"buttons",children:Object(r.jsx)(_,{type:"submit",children:" Submit "})})]})})};var P=function(e){var t=e.orderId,n=e.setOrder,c=e.photoSuffix,s=e.declarationFormUrl,o=Object(a.useState)(null),i=Object(d.a)(o,2),b=i[0],h=i[1],p=Object(a.useState)(0),f=Object(d.a)(p,2),j=f[0],O=f[1],v=function(){var e=Object(l.a)(u.a.mark((function e(r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,m(t,b,c);case 3:a=e.sent,h(null),O(0===j?1+j:j-1),n(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"new-order",children:[Object(r.jsxs)("p",{children:["Please upload a ","id_photo"===c?"photo of your ID":"face_photo"===c?"selfie":"declaration_form"===c?"a photo copy of your declaration form":void 0]}),Object(r.jsxs)("form",{onSubmit:v,children:[Object(r.jsx)(k,{name:"photo",type:"file",handleChange:function(e){if(e.target.files&&e.target.files[0]){var t=e.target.files[0];h(t)}},required:!0},j),b?Object(r.jsx)("img",{alt:"To upload",src:URL.createObjectURL(b)}):null,s?Object(r.jsxs)("p",{children:["Please download declaration form from"," ",Object(r.jsx)("a",{href:s,children:"here"})]}):null,Object(r.jsx)("div",{className:"buttons",children:Object(r.jsx)(_,{type:"submit",children:" UPLOAD "})})]})]})};var U=function(){var e=Object(a.useState)({}),t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=localStorage.getItem("orderId");if(console.log(e),e){function t(){return(t=Object(l.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p(e);case 2:n=t.sent,console.log(n),c(n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}}),[]),Object(r.jsx)("div",{className:"App",children:function(){if("pending_payment"===n.status)return Object(r.jsx)(I,{paymentUrl:n.payment_url});if("pending_id"===n.status){if("phone"===n.id_pending)return Object(r.jsx)(A,{orderId:n.id,setOrder:c});if("id_photo"===n.id_pending||"face_photo"===n.id_pending||"declaration_form"===n.id_pending)return Object(r.jsx)(P,{orderId:n.id,setOrder:c,photoSuffix:n.id_pending,declarationFormUrl:n.id_ext_url})}return Object(r.jsx)(N,{setOrder:c})}()})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(U,{})}),document.getElementById("root")),q()},8:function(e,t,n){}},[[53,1,2]]]);
//# sourceMappingURL=main.f32e9803.chunk.js.map