{"version":3,"sources":["api/buy-bch.api.js","components/custom-button/custom-button.component.jsx","components/form-input/form-input.component.jsx","components/new-order/new-order.component.jsx","components/payment-pending/payment-pending.component.jsx","components/phone-verification/phone-verification.component.jsx","components/photo-verification/photo-verification.component.jsx","App.js","reportWebVitals.js","index.js"],"names":["getOrder","orderId","a","axios","get","response","data","newOrder","bgnAmount","bchAddress","email","post","bgn_amount","bch_addr","verifyPhone","phone","verifyPhoneCode","secretCode","secret_code","verifyPhoto","photo","photoUrl","headers","type","console","log","CustomButton","children","otherProps","inverted","className","FormInput","handleChange","label","onChange","value","length","NewOrder","props","handleSubmit","event","preventDefault","state","bgn","order","localStorage","setItem","setOrder","target","name","setState","onSubmit","this","required","step","React","Component","PaymentPending","paymentUrl","onClick","window","open","removeItem","location","reload","PhoneVerification","useState","setPhone","validationCode","setValidationCode","codeSent","setCodeSent","PhotoVerification","photoSuffix","declarationFormUrl","setPhoto","key","setKey","files","img","alt","src","URL","createObjectURL","href","App","useEffect","getItem","retrievedOrder","fetchOrder","renderSwitch","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f32e9803.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport const getRate = async (bgnAmount) => {\n  const response = await axios.get(\"/bchbgn?amount_bgn=\" + bgnAmount);\n  return response.data[\"amount_bch\"];\n};\n\nexport const getOrder = async (orderId) => {\n  const response = await axios.get(\"/order/\" + orderId);\n  return response.data;\n};\n\nexport const newOrder = async (bgnAmount, bchAddress, email) => {\n  const response = await axios.post(\"/order\", {\n    bgn_amount: bgnAmount,\n    bch_addr: bchAddress,\n    email,\n  });\n  return response.data;\n};\n\nexport const verifyPhone = async (orderId, phone) => {\n  await axios.post(\"/order/\" + orderId + \"/id/phone\", {\n    phone,\n  });\n};\n\nexport const verifyPhoneCode = async (orderId, phone, secretCode) => {\n  const response = await axios.post(\"/order/\" + orderId + \"/id/phone\", {\n    phone,\n    secret_code: secretCode,\n  });\n  return response.data;\n};\n\nexport const verifyPhoto = async (orderId, photo, photoUrl) => {\n  const response = await axios.post(\n    \"/order/\" + orderId + \"/id/\" + photoUrl,\n    photo,\n    {\n      headers: {\n        \"Content-Type\": photo.type,\n      },\n    }\n  );\n  console.log(response);\n  console.log(response.data);\n  return response.data;\n};\n","import React from \"react\";\n\nimport \"./custom-buttom.styles.scss\";\n\nconst CustomButton = ({ children, inverted, ...otherProps }) => (\n  <button className=\"custom-button\" {...otherProps}>\n    {children}\n  </button>\n);\n\nexport default CustomButton;\n","import React from 'react';\n\nimport './form-input.styles.scss';\n\nconst FormInput = ({ handleChange, label, ...otherProps }) => (\n  <div className='group'>\n    <input className='form-input' onChange={handleChange} {...otherProps} />\n    {label ? (\n      <label\n        className={`${\n          otherProps.value.length ? 'shrink' : ''\n        } form-input-label`}\n      >\n        {label}\n      </label>\n    ) : null}\n  </div>\n);\n\nexport default FormInput;\n","import React from \"react\";\nimport CustomButton from \"../custom-button/custom-button.component\";\nimport FormInput from \"../form-input/form-input.component\";\nimport { newOrder } from \"../../api/buy-bch.api\";\n\nimport \"./new-order.styles.scss\";\n\nclass NewOrder extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: \"\",\n      bchAddress: \"\",\n      bgn: \"\",\n    };\n  }\n\n  handleSubmit = async (event) => {\n    event.preventDefault();\n    const order = await newOrder(\n      this.state.bgn,\n      this.state.bchAddress,\n      this.state.email\n    );\n    console.log(order);\n    localStorage.setItem(\"orderId\", order[\"id\"]);\n    this.props.setOrder(order);\n  };\n\n  handleChange = (event) => {\n    const { value, name } = event.target;\n\n    this.setState({ [name]: value });\n  };\n\n  render() {\n    return (\n      <div className=\"new-order\">\n        <form onSubmit={this.handleSubmit}>\n          <FormInput\n            name=\"email\"\n            type=\"email\"\n            handleChange={this.handleChange}\n            value={this.state.email}\n            label=\"Your Email\"\n            required\n          />\n          <FormInput\n            name=\"bchAddress\"\n            type=\"bchAddress\"\n            handleChange={this.handleChange}\n            value={this.state.bchAddress}\n            label=\"Your Bitcoin Cash Wallet Address\"\n            required\n          />\n          <FormInput\n            name=\"bgn\"\n            type=\"number\"\n            step=\"0.001\"\n            handleChange={this.handleChange}\n            value={this.state.bgn}\n            label=\"Amount of BGN you want to spend\"\n            required\n          />\n\n          <div className=\"buttons\">\n            <CustomButton type=\"submit\"> Buy BCH </CustomButton>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default NewOrder;\n","import React from \"react\";\nimport CustomButton from \"../custom-button/custom-button.component\";\n\nimport \"./payment-pending.styles.scss\";\nimport \"../new-order/new-order.styles.scss\";\n\nfunction PaymentPending({ paymentUrl }) {\n  const newOrder = () => {\n    localStorage.removeItem(\"orderId\");\n    window.location.reload();\n  };\n\n  return (\n    <div className=\"new-order\">\n      <p>Thank you for your order</p>\n      <div className=\"buttons\">\n        <CustomButton onClick={() => window.open(paymentUrl, \"_blank\")}>\n          Pay here\n        </CustomButton>\n        <CustomButton onClick={newOrder}>New Order</CustomButton>\n      </div>\n    </div>\n  );\n}\n\nexport default PaymentPending;\n","import React, { useState } from \"react\";\nimport CustomButton from \"../custom-button/custom-button.component\";\nimport FormInput from \"../form-input/form-input.component\";\nimport { verifyPhone, verifyPhoneCode } from \"../../api/buy-bch.api\";\n\nimport \"../new-order/new-order.styles.scss\";\n\nfunction PhoneVerification({ orderId, setOrder }) {\n  const [phone, setPhone] = useState(\"\");\n  const [validationCode, setValidationCode] = useState(\"\");\n  const [codeSent, setCodeSent] = useState(false);\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    if (codeSent) {\n      const order = await verifyPhoneCode(orderId, phone, validationCode);\n      setOrder(order);\n    } else {\n      verifyPhone(orderId, phone);\n      setCodeSent(!codeSent);\n    }\n  };\n\n  const handlePhoneChange = (event) => {\n    setPhone(event.target.value);\n  };\n\n  const handleValidationCodeChange = (event) => {\n    setValidationCode(event.target.value);\n  };\n\n  return (\n    <div className=\"new-order\">\n      <form onSubmit={handleSubmit}>\n        <FormInput\n          name=\"phoneNumber\"\n          type=\"text\"\n          handleChange={handlePhoneChange}\n          value={phone}\n          label=\"Your Phone Number\"\n          required\n        />\n        {codeSent ? (\n          <FormInput\n            name=\"validationCode\"\n            type=\"text\"\n            handleChange={handleValidationCodeChange}\n            value={validationCode}\n            label=\"SMS Code\"\n            required\n          />\n        ) : null}\n        <div className=\"buttons\">\n          <CustomButton type=\"submit\"> Submit </CustomButton>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default PhoneVerification;\n","import React, { useState } from \"react\";\nimport CustomButton from \"../custom-button/custom-button.component\";\nimport FormInput from \"../form-input/form-input.component\";\nimport { verifyPhoto } from \"../../api/buy-bch.api\";\n\nimport \"../new-order/new-order.styles.scss\";\n\nfunction PhotoVerification({\n  orderId,\n  setOrder,\n  photoSuffix,\n  declarationFormUrl,\n}) {\n  const [photo, setPhoto] = useState(null);\n  const [key, setKey] = useState(0);\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const order = await verifyPhoto(orderId, photo, photoSuffix);\n    setPhoto(null);\n    setKey(key === 0 ? 1 + key : key - 1);\n    setOrder(order);\n  };\n\n  const handleChange = (event) => {\n    if (event.target.files && event.target.files[0]) {\n      let img = event.target.files[0];\n      setPhoto(img);\n    }\n  };\n\n  const photoName = () => {\n    if (photoSuffix === \"id_photo\") {\n      return \"photo of your ID\";\n    } else if (photoSuffix === \"face_photo\") {\n      return \"selfie\";\n    } else if (photoSuffix === \"declaration_form\") {\n      return \"a photo copy of your declaration form\";\n    }\n  };\n\n  return (\n    <div className=\"new-order\">\n      <p>Please upload a {photoName()}</p>\n      <form onSubmit={handleSubmit}>\n        <FormInput\n          name=\"photo\"\n          type=\"file\"\n          handleChange={handleChange}\n          required\n          key={key}\n        />\n        {photo ? (\n          <img alt=\"To upload\" src={URL.createObjectURL(photo)} />\n        ) : null}\n        {declarationFormUrl ? (\n          <p>\n            Please download declaration form from{\" \"}\n            <a href={declarationFormUrl}>here</a>\n          </p>\n        ) : null}\n        <div className=\"buttons\">\n          <CustomButton type=\"submit\"> UPLOAD </CustomButton>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default PhotoVerification;\n","import { useEffect, useState } from \"react\";\n\nimport { getOrder } from \"./api/buy-bch.api\";\n\nimport \"./App.css\";\nimport NewOrder from \"./components/new-order/new-order.component\";\nimport PaymentPending from \"./components/payment-pending/payment-pending.component\";\nimport PhoneVerification from \"./components/phone-verification/phone-verification.component\";\nimport PhotoVerification from \"./components/photo-verification/photo-verification.component\";\n// import PhotoVerification from \"./components/photo-verification/photo-verification.component\";\n\nfunction App() {\n  const [order, setOrder] = useState({});\n  useEffect(() => {\n    const orderId = localStorage.getItem(\"orderId\");\n    console.log(orderId);\n    if (orderId) {\n      async function fetchOrder() {\n        const retrievedOrder = await getOrder(orderId);\n        console.log(retrievedOrder);\n        setOrder(retrievedOrder);\n      }\n\n      fetchOrder();\n    }\n  }, []);\n\n  const renderSwitch = () => {\n    if (order[\"status\"] === \"pending_payment\") {\n      return <PaymentPending paymentUrl={order[\"payment_url\"]} />;\n    }\n\n    if (order[\"status\"] === \"pending_id\") {\n      if (order[\"id_pending\"] === \"phone\") {\n        return <PhoneVerification orderId={order[\"id\"]} setOrder={setOrder} />;\n      } else if (\n        order[\"id_pending\"] === \"id_photo\" ||\n        order[\"id_pending\"] === \"face_photo\" ||\n        order[\"id_pending\"] === \"declaration_form\"\n      ) {\n        return (\n          <PhotoVerification\n            orderId={order[\"id\"]}\n            setOrder={setOrder}\n            photoSuffix={order[\"id_pending\"]}\n            declarationFormUrl={order[\"id_ext_url\"]}\n          />\n        );\n      }\n    }\n    return <NewOrder setOrder={setOrder} />;\n  };\n\n  return <div className=\"App\">{renderSwitch()}</div>;\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}